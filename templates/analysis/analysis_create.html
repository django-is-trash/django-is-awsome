{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">ğŸ†• ë¶„ì„ ìƒì„±</h2>

<div class="card shadow-sm p-4">
    <form method="POST">
        {% csrf_token %}

        <!-- ê·¸ë˜í”„ ì„ íƒ -->
        <div class="mb-3">
            <label class="form-label fw-bold">ê·¸ë˜í”„ ì¢…ë¥˜</label>
            <select name="graph_type" class="form-select w-auto">
                <option value="TOTAL">ìˆ˜ì… vs ì§€ì¶œ</option>
                <option value="CATEGORY">ì¹´í…Œê³ ë¦¬ë³„ ì§€ì¶œ</option>
            </select>
        </div>

        <hr class="my-4">

        <label class="form-label fw-bold">ë¶„ì„ ê¸°ê°„</label>

        <!-- ë¶„ì„ ë²„íŠ¼ë“¤ -->
        <div class="d-flex flex-wrap gap-2">
            <button name="type" value="DAILY" class="btn btn-outline-primary">ì˜¤ëŠ˜</button>
            <button name="type" value="LAST_DAY" class="btn btn-outline-secondary">ì–´ì œ</button>

            <button name="type" value="WEEKLY" class="btn btn-outline-primary">ì´ë²ˆì£¼</button>
            <button name="type" value="LAST_WEEK" class="btn btn-outline-secondary">ì§€ë‚œì£¼</button>

            <button name="type" value="MONTHLY" class="btn btn-outline-primary">ì´ë²ˆë‹¬</button>
            <button name="type" value="LAST_MONTH" class="btn btn-outline-secondary">ì§€ë‚œë‹¬</button>

            <button name="type" value="YEARLY" class="btn btn-outline-primary">ì˜¬í•´</button>
            <button name="type" value="LAST_YEAR" class="btn btn-outline-secondary">ì‘ë…„</button>
        </div>
    </form>

    <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
    {% if error %}
        <div class="alert alert-danger mt-4">
            {{ error }}
        </div>
    {% endif %}

    <!-- ë¶„ì„ ì„±ê³µ -->
    {% if result %}
        <div class="alert alert-success mt-4">ë¶„ì„ ìƒì„± ì™„ë£Œ!</div>
        <p><strong>ê¸°ê°„:</strong> {{ result.period_start }} ~ {{ result.period_end }}</p>

        {% if result.result_image %}
            <img src="{{ result.result_image.url }}" class="img-fluid rounded shadow-sm" style="max-width: 450px;">
        {% endif %}
    {% endif %}
</div>

{% endblock %}
